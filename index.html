<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mosh3L G-Phone</title>
    <style>
        :root { --green: #2ecc71; --red: #e74c3c; --blue: #3498db; --pink: #fd79a8; --brown: #8d6e63; --dark: #121212; }
        body { background: #000; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; }

        #g-phone {
            width: 360px; height: 680px; background: var(--dark); border: 4px solid var(--green);
            border-radius: 35px; position: absolute; inset: 0; margin: auto;
            display: flex; flex-direction: column;
            box-shadow: 0 20px 50px rgba(0,0,0,0.9); transition: border-color 0.5s;
        }

        .top-bar { background: var(--blue); height: 40px; border-radius: 30px 30px 0 0;
            display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }

        .lester-trigger { width: 30px; height: 30px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; cursor: pointer; }
        .lester-trigger:hover { box-shadow: 0 0 10px var(--green); }
        .dot { background: var(--green); width: 6px; height: 6px; border-radius: 1px; }

        .controls span { color: white; font-weight: bold; margin-left: 10px; opacity: 0.4; }

        .content { padding: 20px; flex-grow: 1; text-align: center; }
        .google-facade { font-size: 24px; color: white; margin-bottom: 20px; font-weight: bold; }
        .google-facade span { color: var(--green); }

        .shortcut-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .app { cursor: pointer; transition: 0.2s; }
        .app:hover { transform: scale(1.1); }
        .icon { width: 50px; height: 50px; border-radius: 12px; margin: 0 auto 5px;
            display: flex; align-items: center; justify-content: center; font-size: 20px; }

        #shifu-chat { background: #1a1a1a; padding: 15px; color: #888; font-style: italic;
            border-top: 1px solid #333; height: 80px; overflow-y: auto; font-size: 13px;
            border-radius: 0 0 30px 30px; }

        .admin-active { border-color: var(--brown) !important; }
    </style>
</head>
<body>
<div id="g-phone">
    <div class="top-bar" id="drag-handle">
        <div class="lester-trigger" onclick="toggleTerminal()">
            <div class="dot"></div><div class="dot"></div><div class="dot"></div>
            <div class="dot"></div><div class="dot"></div><div class="dot"></div>
            <div class="dot"></div><div class="dot"></div><div class="dot"></div>
        </div>
        <div class="controls">
            <span>‚Äî</span>
            <span>X</span>
        </div>
    </div>

    <div class="content">
        <div class="google-facade">Mosh<span>3L</span></div>
        <div class="shortcut-grid">
            <div class="app" onclick="openApp('gmail')"><div class="icon" style="background: var(--pink);">üìß</div></div>
            <div class="app" onclick="openApp('images')"><div class="icon" style="background: var(--pink);">üîç</div></div>
            <div class="app" onclick="openApp('youtube')"><div class="icon" style="background: var(--pink);">üì∫</div></div>
            <div class="app" onclick="runSecurity()"><div class="icon" style="background: var(--blue);">üõ°Ô∏è</div></div>
        </div>
    </div>

    <div id="shifu-chat">"Patience is a weapon, but a functioning script is better. What are we doing, student?"</div>
</div>

<script>
    let isAdmin = false;
    const API_URL = "http://127.0.0.1:5000/shifu"; // local brain

    async function shifuSpeak(trigger) {
        try {
            const res = await fetch(API_URL, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({context: trigger, admin: isAdmin})
            });
            const data = await res.json();
            document.getElementById('shifu-chat').innerText = `"${data.response}"`;
        } catch (e) {
            document.getElementById('shifu-chat').innerText = `"Shifu is offline. Check the engine, student."`;
        }
    }

    function toggleTerminal() {
        if (!isAdmin) {
            let pass = prompt("Admin Credentials Required:");
            if (pass === "1738A") {
                isAdmin = true;
                document.getElementById('g-phone').classList.add('admin-active');
                shifuSpeak('admin_login');
            } else {
                shifuSpeak('fail');
            }
        } else {
            shifuSpeak('terminal_open');
        }
    }

    function openApp(name) {
        shifuSpeak('open_' + name);
    }

    function runSecurity() {
        shifuSpeak('run_security');
    }
</script>
</body>
</html>